{% load static wagtailcore_tags wagtailuserbar %}
{% load tailwind_tags %}
{% load django_vite %}

<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8"/>
    {% comment %}
    <title>
      {% block title %}
            {% if page.seo_title %}{{ page.seo_title }}{% else %}{{ page.title }}{% endif %}
        {% endblock %}
        {% block title_suffix %}
            {% wagtail_site as current_site %}
            {% if current_site and current_site.site_name %}- {{ current_site.site_name }}{% endif %}
        {% endblock %}
    </title>
    {% endcomment %}
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    {# Favicon #}
    <link rel="icon" href="{% static 'favicon/favicon.ico' %}" sizes="any"><!-- 32×32 -->
    <link rel="apple-touch-icon" href="{% static 'favicon/apple-touch-icon.png' %}"><!-- 180×180 -->

    {# Global stylesheets #}
    <link rel="stylesheet" type="text/css" href="{% static 'css/sfs.css' %}">

    {% block extra_css %}
        {# Override this in templates to add extra stylesheets #}

    {% endblock %}
    {% tailwind_css %}
    {% vite_hmr_client %}
    {% vite_asset 'templates/ts/base.ts' %}

</head>

{#<body class="antialiased w-full sm:bg-black/20 sm:flex sm:flex-col sm:items-center" x-data="{ menu: false }">#}
<body class="antialiased w-full " x-data="{ menu: false }">

{% comment %} URL-dependent navbar {% endcomment %}
<div hx-get="/core/check_url_nav/"
     hx-trigger="load"
     hx-swap="outerHTML"
>
</div>

{#<section class="block bg-white sm:w-[360px]" :class="{'hidden': menu == true}">#}
<section class="block bg-white" :class="{'hidden': menu == true}">
    {% wagtailuserbar %}

    {% block content %}

    {% endblock %}
</section>

{# Global javascript #}

{% block extra_js %}
    {# Override this in templates to add extra javascript #}
{% endblock %}

</body>

<script>
    document.body.addEventListener('htmx:configRequest', (event) => {
        event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
    })
</script>
</html>
