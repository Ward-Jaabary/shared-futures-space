{% extends "base.html" %}
{% load static %}

{% block body_class %}template-homepage{% endblock %}

{% block extra_css %}

{% endblock extra_css %}

{% block content %}

    {% block title %}{% include "partials/title.html" with title=user.display_name dashboard=True %}{% endblock %}

    <section>
        <img src="{% static 'images/dashboard/mobius.gif' %}" alt="mobius temp" class="w-full">

        <div id="initial" class="">
            {% include 'dashboard/partials/location.html' %}
        </div>
    </section>

    {# Messages #}
    <div class="bg-[linear-gradient(180deg,_#EEF3F4_0%,_#E5F1F8_1%,_#e5f1f800_15.62%)] rounded-t-xl">
        <button class="w-full" type="button">
            <h2 class="py-4.5 px-4.5 flex items-center justify-between">
                {% include "partials/text-style/header.html" with text="Your messages" %}
                <div class="w-[12] h-[8] -rotate-90 transition duration-500 ease-out">
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 7.91016L12 1.91016L10.59 0.500156L6 5.08016L1.41 0.500156L0 1.91016L6 7.91016Z"
                              fill="#9759FF"/>
                    </svg>
                </div>
            </h2>
        </button>
    </div>

    {#    {% block messages %}#}
    {#        {% include "dashboard/partials/accordion.html" with title="Messages" list_items=messages %}#}
    {#    {% endblock %}#}

    {# Notifications #}
    <div x-data="{selected:null}">
        {# Custom gradients https://www.hyperui.dev/blog/custom-gradients-with-tailwindcss-jit #}
        <div class="bg-[linear-gradient(180deg,_#EEF3F4_0%,_#E5F1F8_1%,_#e5f1f800_15.62%)] rounded-t-xl">
            <button class="w-full" type="button" @click="selected !== 1 ? selected = 1 : selected = null">
                <h2 class="py-4.5 px-4.5 flex items-center justify-between">
                    {% include "partials/text-style/header.html" with text="Notifications" %}
                    <div class="w-[12] h-[8] transition duration-500 ease-out"
                         :class="{'-rotate-180': selected}">
                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 7.91016L12 1.91016L10.59 0.500156L6 5.08016L1.41 0.500156L0 1.91016L6 7.91016Z"
                                  fill="#9759FF"/>
                        </svg>
                    </div>
                </h2>
            </button>
        </div>

        <div class="px-4 relative overflow-hidden transition-all max-h-0 duration-700"
             style=""
             x-ref="notifications"
             x-bind:style="selected == 1 ? 'max-height: ' + $refs.notifications.scrollHeight + 'px' : ''">

            {# If no notifications:  #}
            {# {% include "partials/salmon-of-knowledge.html" with text="No new notifications, you're all caught up!" %} #}

            {% block notifications %}
                {% include "dashboard/partials/accordion.html" with title="Notifications" list_items=notifications %}
            {% endblock %}

            <div class="h-8"></div>
        </div>
    </div>

    {#  Call to action partial, replace URL variable  #}
    <section class="bg-resources-two">
        {% url 'all_projects' as the_url %}
        {% include "partials/call-to-action.html" with main="Ready to swim?" button="Go to the spring" url=the_url info="" %}
    </section>

    {# Rivers #}
    <div x-data="{selected:null}">
        {# Custom gradients https://www.hyperui.dev/blog/custom-gradients-with-tailwindcss-jit #}
        <div class="bg-[linear-gradient(180deg,_#EEF3F4_0%,_#E5F1F8_1%,_#e5f1f800_15.62%)] rounded-t-xl">
            <button class="w-full" type="button" @click="selected !== 1 ? selected = 1 : selected = null">
                <h2 class="py-4.5 px-4.5 flex items-center justify-between">
                    {% include "partials/text-style/header.html" with text="Your rivers" %}
                    <div class="w-[12] h-[8] transition duration-500 ease-out"
                         :class="{'-rotate-180': selected}">
                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 7.91016L12 1.91016L10.59 0.500156L6 5.08016L1.41 0.500156L0 1.91016L6 7.91016Z"
                                  fill="#9759FF"/>
                        </svg>
                    </div>
                </h2>
            </button>
        </div>

        <div class="px-4 relative overflow-hidden transition-all max-h-0 duration-700"
             style=""
             x-ref="resources"
             x-bind:style="selected == 1 ? 'max-height: ' + $refs.resources.scrollHeight + 'px' : ''">

            {# If no rivers:  #}
            {% include "partials/salmon-of-knowledge.html" with text="Rivers are projects running in your community. Rivers you have joined will be here." %}

            {# If rivers, one looks like: #}
            <div class="">

            </div>

            <div class="h-8"></div>
        </div>
    </div>

    {#    {% block rivers %}#}
    {#        {% include "dashboard/partials/accordion.html" with title="Status of your rivers" list_items=rivers %}#}
    {#    {% endblock %}#}

    {# Resources #}
    <div x-data="{selected:null}">
        {# Custom gradients https://www.hyperui.dev/blog/custom-gradients-with-tailwindcss-jit #}
        <div class="bg-[linear-gradient(180deg,_#EEF3F4_0%,_#E5F1F8_1%,_#e5f1f800_15.62%)] rounded-t-xl">
            <button class="w-full" type="button" @click="selected !== 1 ? selected = 1 : selected = null">
                <h2 class="py-4.5 px-4.5 flex items-center justify-between">
                    {% include "partials/text-style/header.html" with text="Bookmarked resources" %}
                    <div class="w-[12] h-[8] transition duration-500 ease-out"
                         :class="{'-rotate-180': selected}">
                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 7.91016L12 1.91016L10.59 0.500156L6 5.08016L1.41 0.500156L0 1.91016L6 7.91016Z"
                                  fill="#9759FF"/>
                        </svg>
                    </div>
                </h2>
            </button>
        </div>

        <div class="px-4 relative overflow-hidden transition-all max-h-0 duration-700"
             style=""
             x-ref="resources"
             x-bind:style="selected == 1 ? 'max-height: ' + $refs.resources.scrollHeight + 'px' : ''">

            {# If no resources:  #}
            {% include "partials/salmon-of-knowledge.html" with text="Resources you've marked as helpful are saved here in your Dashboard." %}
            <div class="h-8"></div>

            {# If resources, one looks like: #}
            <a href="Link to Resource">
                <div class="bg-gradient-to-b from-gray-light via-white rounded-t-xl flex justify-between items-center">
                    <h3 class="font-kanit-500 text-black-large text-xl p-3">
                        Title of Resource
                    </h3>
                    <div class="px-3">
                        {# Link icon opens the copy URL of that resource modal #}
                        <svg class="inline-block mb-0.5" width="22" height="12" viewBox="0 0 22 12" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M10.175 11.5H5.5C3.9765 11.5 2.684 10.961 1.6115 9.894C0.5335 8.816 0 7.5235 0 6C0 4.4765 0.5335 3.184 1.6115 2.106C2.684 1.0335 3.9765 0.5 5.5 0.5H10.175V2.15H5.5C4.4385 2.15 3.531 2.524 2.7775 3.2775C2.024 4.031 1.65 4.9385 1.65 6C1.65 7.0615 2.024 7.969 2.7775 8.7225C3.531 9.476 4.4385 9.85 5.5 9.85H10.175V11.5ZM6.7375 6.825V5.175H15.2625V6.825H6.7375ZM11.825 11.5V9.85H16.5C17.5615 9.85 18.469 9.476 19.2225 8.7225C19.976 7.969 20.35 7.0615 20.35 6C20.35 4.9385 19.976 4.031 19.2225 3.2775C18.469 2.524 17.5615 2.15 16.5 2.15H11.825V0.5H16.5C18.0235 0.5 19.316 1.0335 20.394 2.106C21.4665 3.1785 22 4.4765 22 6C22 7.5235 21.461 8.816 20.394 9.894C19.3215 10.9665 18.0235 11.5 16.5 11.5H11.825Z"
                                  fill="#9759FF"/>
                        </svg>
                        <svg class="inline-block ml-4 mb-0.5" width="18" height="18" viewBox="0 0 18 18" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 1L7.59 2.41L13.17 8H1V10H13.17L7.59 15.59L9 17L17 9L9 1Z" fill="#9759FF"/>
                        </svg>
                    </div>
                </div>
                <div class="h-3"></div>
            </a>

        </div>
    </div>

    {#    {% block resources %}#}
    {#        {% include "dashboard/partials/accordion.html" with title="Favourite resources" list_items=resources %}#}
    {#    {% endblock %}#}

    {% comment %}
    TODO: Is this true?
    {% endcomment %}
    {% if user.is_staff %}
        <br/>
        <a href="{% url 'account_request_panel' %}">Manage User Requests</a>
    {% endif %}


    {# Get in touch #}
    <div x-data="{selected:null}">
        {# Custom gradients https://www.hyperui.dev/blog/custom-gradients-with-tailwindcss-jit #}
        <div class="bg-[linear-gradient(180deg,_#EEF3F4_0%,_#E5F1F8_1%,_#e5f1f800_15.62%)] rounded-t-xl">
            <button class="w-full" type="button" @click="selected !== 1 ? selected = 1 : selected = null">
                <h2 class="py-4.5 px-4.5 flex items-center justify-between">
                    {% include "partials/text-style/header.html" with text="Get in touch" %}
                    <div class="w-[12] h-[8] transition duration-500 ease-out"
                         :class="{'-rotate-180': selected}">
                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 7.91016L12 1.91016L10.59 0.500156L6 5.08016L1.41 0.500156L0 1.91016L6 7.91016Z"
                                  fill="#9759FF"/>
                        </svg>
                    </div>
                </h2>
            </button>
        </div>

        <div class="px-4 relative overflow-hidden transition-all max-h-0 duration-700"
             style=""
             x-ref="getInTouch"
             x-bind:style="selected == 1 ? 'max-height: ' + $refs.getInTouch.scrollHeight + 'px' : ''">
            {% include "partials/get-in-touch-buttons.html" %}
            <div class="h-8"></div>
        </div>
    </div>

    <script src="{% static 'js/dashboard.js' %}"></script>

{% endblock content %}
