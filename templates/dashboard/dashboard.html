{% extends "base.html" %}
{% load static %}

{% block body_class %}template-homepage{% endblock %}

{% block extra_css %}

{% endblock extra_css %}

{% block content %}

    {% block title %}{% include "partials/title.html" with title=user.display_name dashboard=True %}{% endblock %}

    <section>
        <img src="{% static 'images/dashboard/mobius.gif' %}" alt="mobius temp" class="w-full">

        <div id="initial" class="">
            {% include 'dashboard/partials/location.html' %}
        </div>
    </section>

    {# Messages #}
    <div class="bg-[linear-gradient(180deg,_#EEF3F4_0%,_#E5F1F8_1%,_#e5f1f800_15.62%)] rounded-t-xl">
        <button class="w-full" type="button">
            <h2 class="py-4.5 px-4.5 flex items-center justify-between">
                {% include "partials/text-style/header.html" with text="Your messages" %}
                <div class="w-[12] h-[8] -rotate-90 transition duration-500 ease-out">
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 7.91016L12 1.91016L10.59 0.500156L6 5.08016L1.41 0.500156L0 1.91016L6 7.91016Z"
                            fill="#9759FF"/>
                    </svg>
                </div>
            </h2>
        </button>
    </div>

    {#    {% block messages %}#}
    {#        {% include "dashboard/partials/accordion.html" with title="Messages" list_items=messages %}#}
    {#    {% endblock %}#}

    {# Notifications #}
    <div x-data="{selected:null}">
        {# Custom gradients https://www.hyperui.dev/blog/custom-gradients-with-tailwindcss-jit #}
        <div class="bg-[linear-gradient(180deg,_#EEF3F4_0%,_#E5F1F8_1%,_#e5f1f800_15.62%)] rounded-t-xl">
            <button class="w-full" type="button" @click="selected !== 1 ? selected = 1 : selected = null">
                <h2 class="py-4.5 px-4.5 flex items-center justify-between">
                    {% include "partials/text-style/header.html" with text="Notifications" %}
                    <div class="w-[12] h-[8] transition duration-500 ease-out"
                        :class="{'-rotate-180': selected}">
                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 7.91016L12 1.91016L10.59 0.500156L6 5.08016L1.41 0.500156L0 1.91016L6 7.91016Z"
                                fill="#9759FF"/>
                        </svg>
                    </div>
                </h2>
            </button>
        </div>

        <div class="px-4 relative overflow-hidden transition-all max-h-0 duration-700"
            style=""
            x-ref="notifications"
            x-bind:style="selected == 1 ? 'max-height: ' + $refs.notifications.scrollHeight + 'px' : ''">

            {# If no notifications:  #}
            {# {% include "partials/salmon-of-knowledge.html" with text="No new notifications, you're all caught up!" %} #}

            {% block notifications %}
                {% include "dashboard/partials/accordion.html" with title="Notifications" list_items=notifications %}
            {% endblock %}

            <div class="h-8"></div>
        </div>
    </div>

    {#  Call to action partial, replace URL variable  #}
    <section class="bg-resources-two">
        {% url 'all_projects' as the_url %}
        {% include "partials/call-to-action.html" with main="Ready to swim?" button="Go to the spring" url=the_url info="" %}
    </section>

    {# Rivers #}
    <div x-data="{selected:null}">
        {# Custom gradients https://www.hyperui.dev/blog/custom-gradients-with-tailwindcss-jit #}
        <div class="bg-[linear-gradient(180deg,_#EEF3F4_0%,_#E5F1F8_1%,_#e5f1f800_15.62%)] rounded-t-xl">
            <button class="w-full" type="button" @click="selected !== 1 ? selected = 1 : selected = null">
                <h2 class="py-4.5 px-4.5 flex items-center justify-between">
                    {% include "partials/text-style/header.html" with text="Your rivers" %}
                    <div class="w-[12] h-[8] transition duration-500 ease-out"
                        :class="{'-rotate-180': selected}">
                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 7.91016L12 1.91016L10.59 0.500156L6 5.08016L1.41 0.500156L0 1.91016L6 7.91016Z"
                                fill="#9759FF"/>
                        </svg>
                    </div>
                </h2>
            </button>
        </div>

        <div class="px-4 relative overflow-hidden transition-all max-h-0 duration-700"
            style=""
            x-ref="resources"
            x-bind:style="selected == 1 ? 'max-height: ' + $refs.resources.scrollHeight + 'px' : ''">

            {# If no rivers:  #}
            {% include "partials/salmon-of-knowledge.html" with text="Rivers are projects running in your community. Rivers you have joined will be here." %}

            <div class="h-8"></div>
        </div>
    </div>

    {#    {% block rivers %}#}
    {#        {% include "dashboard/partials/accordion.html" with title="Status of your rivers" list_items=rivers %}#}
    {#    {% endblock %}#}

    {# Resources #}
    <div x-data="{selected:null}">
        {# Custom gradients https://www.hyperui.dev/blog/custom-gradients-with-tailwindcss-jit #}
        <div class="bg-[linear-gradient(180deg,_#EEF3F4_0%,_#E5F1F8_1%,_#e5f1f800_15.62%)] rounded-t-xl">
            <button class="w-full" type="button" @click="selected !== 1 ? selected = 1 : selected = null">
                <h2 class="py-4.5 px-4.5 flex items-center justify-between">
                    {% include "partials/text-style/header.html" with text="Bookmarked resources" %}
                    <div class="w-[12] h-[8] transition duration-500 ease-out"
                        :class="{'-rotate-180': selected}">
                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 7.91016L12 1.91016L10.59 0.500156L6 5.08016L1.41 0.500156L0 1.91016L6 7.91016Z"
                                fill="#9759FF"/>
                        </svg>
                    </div>
                </h2>
            </button>
        </div>

        <div class="px-4 relative overflow-hidden transition-all max-h-0 duration-700"
            style=""
            x-ref="resources"
            x-bind:style="selected == 1 ? 'max-height: ' + $refs.resources.scrollHeight + 'px' : ''">

            {# If no resources:  #}
            {% include "partials/salmon-of-knowledge.html" with text="Resources you've marked as helpful are saved here in your Dashboard." %}
            
            <div class="h-8"></div>
        </div>
    </div>

    {#    {% block resources %}#}
    {#        {% include "dashboard/partials/accordion.html" with title="Favourite resources" list_items=resources %}#}
    {#    {% endblock %}#}

    {% comment %}
    TODO: Is this true?
    {% endcomment %}
    {% if user.is_staff %}
        <br/>
        <a href="{% url 'account_request_panel' %}">Manage User Requests</a>
    {% endif %}


    {# Get in touch #}
    <div x-data="{selected:null}">
        {# Custom gradients https://www.hyperui.dev/blog/custom-gradients-with-tailwindcss-jit #}
        <div class="bg-[linear-gradient(180deg,_#EEF3F4_0%,_#E5F1F8_1%,_#e5f1f800_15.62%)] rounded-t-xl">
            <button class="w-full" type="button" @click="selected !== 1 ? selected = 1 : selected = null">
                <h2 class="py-4.5 px-4.5 flex items-center justify-between">
                    {% include "partials/text-style/header.html" with text="Get in touch" %}
                    <div class="w-[12] h-[8] transition duration-500 ease-out"
                        :class="{'-rotate-180': selected}">
                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 7.91016L12 1.91016L10.59 0.500156L6 5.08016L1.41 0.500156L0 1.91016L6 7.91016Z"
                                fill="#9759FF"/>
                        </svg>
                    </div>
                </h2>
            </button>
        </div>

        <div class="px-4 relative overflow-hidden transition-all max-h-0 duration-700"
            style=""
            x-ref="getInTouch"
            x-bind:style="selected == 1 ? 'max-height: ' + $refs.getInTouch.scrollHeight + 'px' : ''">
            {% include "partials/get-in-touch-buttons.html" %}
            <div class="h-8"></div>
        </div>
    </div>

    <script src="{% static 'js/dashboard.js' %}"></script>

{% endblock content %}
