{% load custom_filters %}

<div class="flex flex-col gap-3" id="swimmers">
    {% for member in members %}
        <div class="flex justify-between items-center">
            <a href="{% url 'user_detail' member.user.user_slug %}" class="flex gap-2 items-center">
                <img class="h-6 w-6" src={{ member.user.avatar.image_url }}>
                <span class="text-meta-label">{{ member.user.display_name }} {% if member.user in starters|attrmap:'user' %}(starter){% endif %}</span>
            </a>
            <p class="text-meta text-black/30">Joined {{ member.join_date|date }}</p>
            {% if user in starters|attrmap:'user' and member.user not in starters|attrmap:'user' %}
                <form method=POST hx-post="{% url 'manage_river' slug %}" hx-target="closest #swimmers" hx-swap="outerHTML">
                    {% csrf_token %}
                    <input type="hidden" name="membership" value="{{ member.id }}">
                    <button name="action" value="remove_swimmer">Remove</button>
                    {% if member.user in open_starter_offers %}
                        <p>(Offered Starter Status)</p>
                    {% else %}
                        <button name="action" value="offer_starter">Offer Starter Status</button>
                    {% endif %}
                </form>
            {% endif %}
        </div>
    {% endfor %}
</div>
{% include "partials/vertical-spacer.html" with space="3" %}
