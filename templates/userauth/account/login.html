{% extends "account/base.html" %}

{% comment %} If you are not logged in and trying to access restricted areas you are redirected to /account/login/{% endcomment %}

{% load static %}

{% load account socialaccount %}

{% load widget_tweaks %}

{% get_providers as socialaccount_providers %}

{% block content %}

    <div class="flex flex-col h-screen">

        {% block title %}{% include "partials/title.html" with title="Log in" %}{% endblock %}

        <form class="" method="POST" action="{% url 'account_login' %}">
            {% csrf_token %}

            {% if form.non_field_errors %}
                <div class="mx-4 mb-4 font-body bg-red-100">
                    {% for error in form.non_field_errors %}
                        <p class="px-4 py-3">{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}

            <div class="pt-4 px-4 pb-9">
                <label class="block pb-2.5 uppercase font-kanit-600 font-medium text-xxs tracking-widest text-black-text">
                    Email
                </label>
                {% render_field form.login id="email-input" onfocusout="processEmailValue()" class="form-control block w-full px-3 py-2.5 font-body text-gray-700 bg-gray-light shadow-input bg-clip-padding border border-solid border-white transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:outline-none focus:border-purple focus:bg-white focus:ring-0" %}

                {% comment %}controlled via js/ts{% endcomment %}
                <span id="email-feedback" class="hidden block text-red-600 font-kanit-400 text-xxs pt-2">Please enter a valid email address.</span>
            </div>

            <div class="px-4 pb-9">
                <label class="block pb-2.5 uppercase font-kanit-600 font-medium text-xxs tracking-widest text-black-text">
                    Password
                </label>
                {% render_field form.password id="password-input" class="form-control block w-full px-3 py-2.5 font-body text-gray-700 bg-gray-light shadow-input bg-clip-padding border border-solid border-white transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:outline-none focus:border-purple focus:bg-white focus:ring-0" %}
            </div>

            <div class="px-4 pb-9">
                <button id="submit-button" disabled
                        class="cursor-not-allowed inline-block px-4 py-3.5 transition ease-out duration-300 text-purple font-kanit-700 font-medium uppercase text-xxs tracking-widest rounded-full bg-blue-button disabled:bg-gray-light"
                        type="submit">Log in
                </button>
            </div>

            <a href="{% url 'account_reset_password' %}"
               class="flex items-center px-4 pb-9 uppercase font-kanit-400 text-xxxs tracking-widest text-black-text">
                <p class="inline-block pr-1.5">Forgotten password?</p>
                <svg class="inline-block" width="16" height="16" viewBox="0 0 16 16" fill="none"
                     xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 0L6.59 1.41L12.17 7H0V9H12.17L6.59 14.59L8 16L16 8L8 0Z" fill="#9759FF"/>
                </svg>
            </a>

        </form>

        <section class="bg-gradient-to-b from-blue-second to-white flex flex-col items-center">
            <h2 class="pt-10 mx-auto inline-block pb-8 uppercase font-kanit-600 font-medium text-xxs tracking-widest text-black-text">
                Alternatively log in with</h2>
            {% include "socialaccount/partials/provider_list.html" with process="login" %}
        </section>

        <div class="bg-blue-second text-center">
            <h2 class="pt-4 pb-4 uppercase font-kanit-400 text-xxxs tracking-widest text-black-text">
                Need a Shared Futures account?
            </h2>
            <a href="{{ signup_url }}"
               class="inline-block mb-2 bg-blue-button px-4 py-3.5 hover:bg-blue-done transition ease-out duration-300 text-purple font-kanit-700 font-medium uppercase text-xxs tracking-widest rounded-full disabled:bg-gray-light">
                Sign up
            </a>
        </div>

        {% block scripts %}
            <script src="{% static 'js/auth-helper.js' %}"></script>
        {% endblock %}

        {% include "partials/footer-gradient.html" %}
    </div>

{% endblock %}