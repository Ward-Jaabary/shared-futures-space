{% extends "account/base.html" %}
{% load static %}

{% load account socialaccount %}

{% load widget_tweaks %}

{% get_providers as socialaccount_providers %}

{% block content %}

    <p class="text-2xl">Log in</p>

    <div class="w-full max-w-xs">
        <form class="" method="POST" action="{% url 'account_login' %}">
            {% csrf_token %}

            <div class="mb-4">
                <label class="block text-gray-700 text-sm font-bold mb-2">
                    Email
                </label>
                {% render_field form.login id="email-input" onfocusout="processEmailValue()" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" %}

                {% comment %}controlled via js/ts{% endcomment %}
                <div id="email-feedback" class="hidden text-purple-600">Enter a valid email address.</div>

            </div>


            <div class="mb-6">
                <label class="block text-gray-700 text-sm font-bold mb-2">
                    Password
                </label>
                {% render_field form.password id="password-input" class="shadow appearance-none border border-red-100 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" %}
            </div>

            {% if form.non_field_errors %}

                <div class="border-2 rounded-lg mt-2 mb-2">
                    {% for error in form.non_field_errors %}
                        <span>{{ error }}</span>
                    {% endfor %}
                </div>
            {% endif %}


            {% if redirect_field_value %}
                <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}"/>
            {% endif %}

            <div class="items-center">
                <a class="block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800 pb-6"
                   href="{% url 'account_reset_password' %}">Forgot Password? -></a>
                <button id="submit-button" disabled
                        class="block bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline cursor-not-allowed"
                        type="submit">Log in
                </button>

            </div>

        </form>
    </div>


    <div>
        <div class="border-2 rounded-lg mt-2 mb-2">
            {% include "socialaccount/snippets/provider_list.html" with process="login" %}
        </div>

        <div class="border-2 rounded-lg mt-2 mb-2">
            <p class="text-lg">Don't have an account yet?
                <button class="block"><a href="{{ signup_url }}"
                                         class="font-semibold">Sign up</a>
                </button>
            </p>
        </div>
    </div>




    {% block scripts %}
        <script src="{% static 'js/email-helper.js' %}"></script>
    {% endblock %}



{% endblock %}