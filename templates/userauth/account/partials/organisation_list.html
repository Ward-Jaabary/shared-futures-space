<section class="flex justify-center absolute left-0 top-0 border-8 shadow-xl">
    <div class="block p-6 rounded-lg shadow-lg bg-white max-w-sm">
        <h2 class="text-2xl">Is your organisation already in our system?</h2>

        <div>
            <h3 class="text-1xl uppercase">Organisations</h3>
            <ul>
                {% for organisation in organisations %}
                    <li>
                        <button onclick="selectOrganisation(this.innerText)"
                                class="inline-block px-4 py-3.5 bg-white hover:bg-blue-done transition ease-out duration-300 text-purple font-kanit-700 font-medium text-xxs tracking-widest rounded-full">{{ organisation }}
                        </button>
                    </li>
                {% endfor %}
            </ul>
            <div class="flex items-center">
                <button onclick="backFromOrganisations()"
                        class="inline-block px-4 py-3.5 bg-orange-300 transition ease-out duration-300 text-purple font-kanit-700 uppercase font-medium text-xxs tracking-widest rounded-full">
                    Back
                </button>
                <button onclick="submitOrganisation()"
                        class="inline-block px-4 py-3.5 bg-orange-300 transition ease-out duration-300 text-purple font-kanit-700 uppercase font-medium text-xxs tracking-widest rounded-full">
                    Done
                </button>
            </div>

            <button onclick="openAddName()"
                    class="inline-block px-4 py-3.5 bg-orange-300 transition ease-out duration-300 text-purple font-kanit-700 uppercase font-medium text-xxs tracking-widest rounded-full">
                Not on the list
            </button>
        </div>
    </div>
</section>

<script>

    let selectedOrganisation = ''


    function toggleOrganisations() {
        const organisationList = document.getElementById("organisation-list")
        const checkbox = document.getElementById("organisation-checkbox")
        if (checkbox.checked) {
            organisationList.classList.remove('hidden')
        } else {
            organisationList.classList.add('hidden')
        }
    }

    function backFromOrganisations() {
        const organisationList = document.getElementById("organisation-list")
        const checkbox = document.getElementById("organisation-checkbox")
        const organisationDataBlock = document.getElementById("organisation-data")
        const organisationInputBox = document.getElementById("organisation-starter")
        organisationInputBox.classList.add('hidden')

        if (checkbox.checked) {
            organisationList.classList.add('hidden')
            checkbox.checked = false
            const organisationInput = document.getElementById("organisation")
            selectedOrganisation = 'None'
            organisationInput.value = selectedOrganisation
            organisationDataBlock.classList.add('hidden')
            if (organisationInputBox.classList.contains('hidden')) {
                organisationInputBox.classList.remove('hidden')
            }
        }

    }


    {% comment %}
    if (submitButton.classList.contains('cursor-not-allowed'))
        {}
      {% endcomment %}

    function selectOrganisation(orgName) {
        selectedOrganisation = orgName
    }

    function submitOrganisation() {
        console.log(`Selected ${selectedOrganisation}`)

        const organisationInput = document.getElementById("organisation")
        organisationInput.value = selectedOrganisation
        organisationInput.classList.add('cursor-not-allowed')

        const organisationInputBox = document.getElementById("organisation-starter")
        organisationInputBox.classList.add('hidden')

        const organisationDataBlock = document.getElementById("organisation-data")
        organisationDataBlock.classList.remove('hidden')

        const organisationList = document.getElementById("organisation-list")
        organisationList.classList.add('hidden')

    }

    function openAddName() {

        const organisationList = document.getElementById("organisation-list")
        organisationList.classList.add('hidden')
        const organisationDataBlock = document.getElementById("organisation-name-enter")
        organisationDataBlock.classList.remove('hidden')
    }

    function addName() {
        const newOrg = document.getElementById("organisation-name").value

        selectOrganisation(newOrg)
        submitOrganisation()


        const organisationDataBlock = document.getElementById("organisation-name-enter")
        organisationDataBlock.classList.add('hidden')

    }


</script>