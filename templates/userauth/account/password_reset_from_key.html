{% extends "account/base.html" %}
{% comment %} Page: reset password via clicked email link - /account/password/reset/key/{{dynamically-generated-token}}/
{% endcomment %}

{% load account %}



{% block content %}

    <div class="flex flex-col h-screen">

        {% block title %}{% include "partials/title.html" with title="Set a new password" %}{% endblock %}

        <div class="h-3"></div>

        {% if token_fail %}

            {% url 'account_reset_password' as passwd_reset_url %}
            <p class="font-garamond-500 text-black-large text-xl text-22 px-4 pb-9">
                The password reset link was invalid, possibly because it has already been used. Please request a new password reset.
            </p>

            <a href="{% url 'account_reset_password' %}"
               class="button button-on-white">
                Request password reset
            </a>

        {% else %}

            {% if form %}
                <form class="px-4 m-0" method="POST" action="{{ action_url }}">
                    {% csrf_token %}

                    {{ form.as_p }}

                    <div class="h-9"></div>

                    <input type="submit"
                           name="action"
                           value="set password"
                           class="cursor-not-allowed button button-on-white"
                    />
                </form>
                <div class="h-9"></div>
            {% else %}
                <p class="font-garamond-500 text-black-large text-xl text-22 px-4">
                    Your password is now changed.
                </p>
                <div class="h-9"></div>
            {% endif %}

        {% endif %}

        {% include "partials/footer-gradient.html" %}
    </div>

{% endblock %}